# Copyright 2021 NetApp, Inc. All Rights Reserved.
# Licensed under the Apache License, Version 2.0.

# This file is a template for dev deployments. Do NOT make local changes to this file unless they would apply
# to all developers (e.g. the addition of a new resource).

# Copy this file to deploy/k8s/dev/kustomization.yaml and define any custom configuration required for your dev deployment.
# deploy/k8s/dev/kustomization.yaml is .gitignored and is safe to modify. When deploy/k8s/dev/kustomization-template.yaml
# changes, consider incorporating the changes into your local deploy/k8s/dev/kustomization.yaml.

apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
bases:
  - ../base
resources:
  - csi-beegfs-testing.yaml
namespace: default
images:
  - name: netapp/beegfs-csi-driver
    newName: docker.repo.eng.netapp.com/globalcicd/apheleia/beegfs-csi-driver
    newTag: master
  - name: k8s.gcr.io/sig-storage/csi-provisioner
    newName: docker.repo.eng.netapp.com/sig-storage/csi-provisioner
    # newTag:
  - name: k8s.gcr.io/sig-storage/livenessprobe
    newName: docker.repo.eng.netapp.com/sig-storage/livenessprobe
    # newTag:
  - name: k8s.gcr.io/sig-storage/csi-node-driver-registrar
    newName: docker.repo.eng.netapp.com/sig-storage/csi-node-driver-registrar
    # newTag:
  - name: alpine/socat
    newName: docker.repo.eng.netapp.com/alpine/socat
    # newTag:
patchesStrategicMerge:
  - csi-beegfs-controller.yaml
  - csi-beegfs-node.yaml
configMapGenerator:
  - name: csi-beegfs-config
    behavior: replace
    files:
      - csi-beegfs-config.yaml
secretGenerator:
  - name: csi-beegfs-connauth
    behavior: replace
    files:
      - csi-beegfs-connauth.yaml
